machine:
  environment:
    USER_NAME: VasileUngureanu
    USER_EMAIL: vasile.v.ungureanu@gmail.com
  ruby:
    version: 2.6.3p62
  node:
    version: 6.11.3

dependencies:
  pre:
    - gem install jekyll bundler
    - bundle check || bundle install
    - bundle update
    - npm install -g yarn
    - yarn install --modules-folder ./_assets/yarn

test:
  post:
    - bundle exec jekyll build
    - rm -R ./_site/node_modules
    - bundle exec htmlproofer ./_site --only-4xx --allow-hash-href --assume-extension --check-opengraph --url-ignore "feed.xml"

deployment:
  production:
    branch: master
    commands:
      - ./deploy.sh